<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>poser: PSC_Service Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">poser
   </div>
   <div id="projectbrief">A C framework for POsix SERvices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_p_s_c___service.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_p_s_c___service-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">PSC_Service Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A main service loop.  
 <a href="class_p_s_c___service.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="service_8h_source.html">poser/core/service.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad465f718fbf675f4605660b8c29e8894"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#ad465f718fbf675f4605660b8c29e8894">PSC_Service_readyRead</a> (void)</td></tr>
<tr class="memdesc:ad465f718fbf675f4605660b8c29e8894"><td class="mdescLeft">&#160;</td><td class="mdescRight">A file descriptor is ready for reading.  <br /></td></tr>
<tr class="separator:ad465f718fbf675f4605660b8c29e8894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac76d2ee8a24ef0c15f9555fd15b3fe53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#ac76d2ee8a24ef0c15f9555fd15b3fe53">PSC_Service_readyWrite</a> (void)</td></tr>
<tr class="memdesc:ac76d2ee8a24ef0c15f9555fd15b3fe53"><td class="mdescLeft">&#160;</td><td class="mdescRight">A file descriptor is ready for writing.  <br /></td></tr>
<tr class="separator:ac76d2ee8a24ef0c15f9555fd15b3fe53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdda6bf727166d7d65b0044664dfd7de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#afdda6bf727166d7d65b0044664dfd7de">PSC_Service_prestartup</a> (void)</td></tr>
<tr class="memdesc:afdda6bf727166d7d65b0044664dfd7de"><td class="mdescLeft">&#160;</td><td class="mdescRight">The service is about to start.  <br /></td></tr>
<tr class="separator:afdda6bf727166d7d65b0044664dfd7de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0beb89e8cc58a5e5c2546223e2aad11"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#ac0beb89e8cc58a5e5c2546223e2aad11">PSC_Service_startup</a> (void)</td></tr>
<tr class="memdesc:ac0beb89e8cc58a5e5c2546223e2aad11"><td class="mdescLeft">&#160;</td><td class="mdescRight">The service started.  <br /></td></tr>
<tr class="separator:ac0beb89e8cc58a5e5c2546223e2aad11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef87c33753313c9b1deb1c369647916"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#acef87c33753313c9b1deb1c369647916">PSC_Service_shutdown</a> (void)</td></tr>
<tr class="memdesc:acef87c33753313c9b1deb1c369647916"><td class="mdescLeft">&#160;</td><td class="mdescRight">The service is shutting down.  <br /></td></tr>
<tr class="separator:acef87c33753313c9b1deb1c369647916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf392855cf95193b46a4da549d3fc2f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#adf392855cf95193b46a4da549d3fc2f3">PSC_Service_tick</a> (void)</td></tr>
<tr class="memdesc:adf392855cf95193b46a4da549d3fc2f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The timer ticks.  <br /></td></tr>
<tr class="separator:adf392855cf95193b46a4da549d3fc2f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76c5e97ed7e2c4d611890763b24de66d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a76c5e97ed7e2c4d611890763b24de66d">PSC_Service_eventsDone</a> (void)</td></tr>
<tr class="memdesc:a76c5e97ed7e2c4d611890763b24de66d"><td class="mdescLeft">&#160;</td><td class="mdescRight">All events for one loop iteration are processed.  <br /></td></tr>
<tr class="separator:a76c5e97ed7e2c4d611890763b24de66d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a731fb7c5d36dd373bce11cdfaced14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a2a731fb7c5d36dd373bce11cdfaced14">PSC_Service_registerRead</a> (int id)</td></tr>
<tr class="memdesc:a2a731fb7c5d36dd373bce11cdfaced14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a file descriptor for read monitoring.  <br /></td></tr>
<tr class="separator:a2a731fb7c5d36dd373bce11cdfaced14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a947f2fddef0d9e489adef6bbeb948ff1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a947f2fddef0d9e489adef6bbeb948ff1">PSC_Service_unregisterRead</a> (int id)</td></tr>
<tr class="memdesc:a947f2fddef0d9e489adef6bbeb948ff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a file descriptor for read monitoring.  <br /></td></tr>
<tr class="separator:a947f2fddef0d9e489adef6bbeb948ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e23c535d21ee25eb342b02176164182"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a2e23c535d21ee25eb342b02176164182">PSC_Service_registerWrite</a> (int id)</td></tr>
<tr class="memdesc:a2e23c535d21ee25eb342b02176164182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a file descriptor for write monitoring.  <br /></td></tr>
<tr class="separator:a2e23c535d21ee25eb342b02176164182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c005146623534a921c7189b663669b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a1c005146623534a921c7189b663669b1">PSC_Service_unregisterWrite</a> (int id)</td></tr>
<tr class="memdesc:a1c005146623534a921c7189b663669b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a file descriptor for write monitoring.  <br /></td></tr>
<tr class="separator:a1c005146623534a921c7189b663669b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f2306d1f22adb1ac956835b8cf0824f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a4f2306d1f22adb1ac956835b8cf0824f">PSC_Service_registerPanic</a> (<a class="el" href="service_8h.html#a8c64699d484aba164fa0ae7baedeb360">PSC_PanicHandler</a> handler)</td></tr>
<tr class="memdesc:a4f2306d1f22adb1ac956835b8cf0824f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a panic handler.  <br /></td></tr>
<tr class="separator:a4f2306d1f22adb1ac956835b8cf0824f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17e2c881aa49769dc9e2bd40dd78bcad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a17e2c881aa49769dc9e2bd40dd78bcad">PSC_Service_unregisterPanic</a> (<a class="el" href="service_8h.html#a8c64699d484aba164fa0ae7baedeb360">PSC_PanicHandler</a> handler)</td></tr>
<tr class="memdesc:a17e2c881aa49769dc9e2bd40dd78bcad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a panic handler.  <br /></td></tr>
<tr class="separator:a17e2c881aa49769dc9e2bd40dd78bcad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d1f83cfd355b5fa8cbcb27d8006024"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#ae7d1f83cfd355b5fa8cbcb27d8006024">PSC_Service_setTickInterval</a> (unsigned msec)</td></tr>
<tr class="memdesc:ae7d1f83cfd355b5fa8cbcb27d8006024"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the timer tick interval.  <br /></td></tr>
<tr class="separator:ae7d1f83cfd355b5fa8cbcb27d8006024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa30cc03aea9d2761869b3938cf0981ad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#aa30cc03aea9d2761869b3938cf0981ad">PSC_Service_loop</a> (void)</td></tr>
<tr class="memdesc:aa30cc03aea9d2761869b3938cf0981ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the service loop.  <br /></td></tr>
<tr class="separator:aa30cc03aea9d2761869b3938cf0981ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4119741ca5b09aa0842e5185dc007107"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a4119741ca5b09aa0842e5185dc007107">PSC_Service_run</a> (void)</td></tr>
<tr class="memdesc:a4119741ca5b09aa0842e5185dc007107"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the service.  <br /></td></tr>
<tr class="separator:a4119741ca5b09aa0842e5185dc007107"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39a3d5d8cda362329a33ec6afd18cfac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a39a3d5d8cda362329a33ec6afd18cfac">PSC_Service_quit</a> (void)</td></tr>
<tr class="memdesc:a39a3d5d8cda362329a33ec6afd18cfac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request the service to quit.  <br /></td></tr>
<tr class="separator:a39a3d5d8cda362329a33ec6afd18cfac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe59bacec328553a6e5a2f239fdd5fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a4fe59bacec328553a6e5a2f239fdd5fd">PSC_Service_shutdownLock</a> (void)</td></tr>
<tr class="memdesc:a4fe59bacec328553a6e5a2f239fdd5fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay shutdown of the service.  <br /></td></tr>
<tr class="separator:a4fe59bacec328553a6e5a2f239fdd5fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c75bef0649759d6252806ab5f87aa7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a13c75bef0649759d6252806ab5f87aa7">PSC_Service_shutdownUnlock</a> (void)</td></tr>
<tr class="memdesc:a13c75bef0649759d6252806ab5f87aa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow shutdown to continue.  <br /></td></tr>
<tr class="separator:a13c75bef0649759d6252806ab5f87aa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bea0a15772d5edc762d9b88143e1157"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___service.html#a2bea0a15772d5edc762d9b88143e1157">PSC_Service_panic</a> (const char *msg)</td></tr>
<tr class="memdesc:a2bea0a15772d5edc762d9b88143e1157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger a service panic.  <br /></td></tr>
<tr class="separator:a2bea0a15772d5edc762d9b88143e1157"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A main service loop. </p>
<p>This class provides a service loop monitoring a set of file descriptors using the classic POSIX pselect() API. Therefore it is not suitable for thousands of concurrent clients. It is designed for portability with few dependencies and will work fine with up to a few hundred file descriptors.</p>
<p>Status changes on file descriptors are published as events. It also offers a configurable periodic "tick" event and handles standard signals (SIGINT and SIGTERM) for termination.</p>
<p>Finally, there's a panic function to quickly exit the loop and still give a chance for some (minimal) cleanup. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a76c5e97ed7e2c4d611890763b24de66d" name="a76c5e97ed7e2c4d611890763b24de66d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76c5e97ed7e2c4d611890763b24de66d">&#9670;&#160;</a></span>PSC_Service_eventsDone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> * PSC_Service_eventsDone </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>All events for one loop iteration are processed. </p>
<p>This event fires once per loop iteration. It can be used to delay an action until all events for the current iteration were processed. </p>

</div>
</div>
<a id="aa30cc03aea9d2761869b3938cf0981ad" name="aa30cc03aea9d2761869b3938cf0981ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa30cc03aea9d2761869b3938cf0981ad">&#9670;&#160;</a></span>PSC_Service_loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PSC_Service_loop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the service loop. </p>
<p>This runs the plain service loop. Callers are responsible to initialize a <a class="el" href="class_p_s_c___thread_pool.html" title="A thread pool.">PSC_ThreadPool</a> if needed, to call PSC_Daemon_run() if needed, to configure logging, etc. Use this if you need some custom setup. Otherwise, see <a class="el" href="class_p_s_c___service.html#a4119741ca5b09aa0842e5185dc007107" title="Run the service.">PSC_Service_run()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>an exit code </dd></dl>

</div>
</div>
<a id="a2bea0a15772d5edc762d9b88143e1157" name="a2bea0a15772d5edc762d9b88143e1157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bea0a15772d5edc762d9b88143e1157">&#9670;&#160;</a></span>PSC_Service_panic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_panic </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Trigger a service panic. </p>
<p>A panic will jump directly back to the service loop and exit it immediately. Registered panic handlers are called and basic cleanup is attempted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>the panic message, will be logged at PSC_L_FATAL level </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afdda6bf727166d7d65b0044664dfd7de" name="afdda6bf727166d7d65b0044664dfd7de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdda6bf727166d7d65b0044664dfd7de">&#9670;&#160;</a></span>PSC_Service_prestartup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> * PSC_Service_prestartup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The service is about to start. </p>
<p>This event fires early in the startup process. Especially, it fires before any attempt to switch to a different user. Therefore, it is recommended to use it to create TCP servers. This will allow to use low port numbers for listening when launched as the superuser (root).</p>
<p>A <a class="el" href="class_p_s_c___e_a_startup.html" title="Event arguments for service (pre)startup events.">PSC_EAStartup</a> object is passed as the event args. Startup can be aborted by setting a non-0 return code on it. </p>

</div>
</div>
<a id="a39a3d5d8cda362329a33ec6afd18cfac" name="a39a3d5d8cda362329a33ec6afd18cfac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a3d5d8cda362329a33ec6afd18cfac">&#9670;&#160;</a></span>PSC_Service_quit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_quit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Request the service to quit. </p>
<p>Once all events of the current loop iteration are processed, the service loop will exit cleanly. </p>

</div>
</div>
<a id="ad465f718fbf675f4605660b8c29e8894" name="ad465f718fbf675f4605660b8c29e8894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad465f718fbf675f4605660b8c29e8894">&#9670;&#160;</a></span>PSC_Service_readyRead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> * PSC_Service_readyRead </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A file descriptor is ready for reading. </p>
<p>The file descriptor is used as the id of the event, so handlers must be registered using the file descriptor of interest as the id. A pointer to the id is also passed as the event arguments. </p>

</div>
</div>
<a id="ac76d2ee8a24ef0c15f9555fd15b3fe53" name="ac76d2ee8a24ef0c15f9555fd15b3fe53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac76d2ee8a24ef0c15f9555fd15b3fe53">&#9670;&#160;</a></span>PSC_Service_readyWrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> * PSC_Service_readyWrite </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A file descriptor is ready for writing. </p>
<p>The file descriptor is used as the id of the event, so handlers must be registered using the file descriptor of interest as the id. A pointer to the id is also passed as the event arguments. </p>

</div>
</div>
<a id="a4f2306d1f22adb1ac956835b8cf0824f" name="a4f2306d1f22adb1ac956835b8cf0824f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f2306d1f22adb1ac956835b8cf0824f">&#9670;&#160;</a></span>PSC_Service_registerPanic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_registerPanic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#a8c64699d484aba164fa0ae7baedeb360">PSC_PanicHandler</a>&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register a panic handler. </p>
<p>When <a class="el" href="class_p_s_c___service.html#a2bea0a15772d5edc762d9b88143e1157" title="Trigger a service panic.">PSC_Service_panic()</a> is called, the registered handlers are called before exiting the service loop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>the panic handler </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2a731fb7c5d36dd373bce11cdfaced14" name="a2a731fb7c5d36dd373bce11cdfaced14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a731fb7c5d36dd373bce11cdfaced14">&#9670;&#160;</a></span>PSC_Service_registerRead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_registerRead </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register a file descriptor for read monitoring. </p>
<p>For a file descriptor registered for read monitoring, a <a class="el" href="class_p_s_c___service.html#ad465f718fbf675f4605660b8c29e8894" title="A file descriptor is ready for reading.">PSC_Service_readyRead()</a> event will be created when it's ready to read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the file descriptor to monitor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e23c535d21ee25eb342b02176164182" name="a2e23c535d21ee25eb342b02176164182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e23c535d21ee25eb342b02176164182">&#9670;&#160;</a></span>PSC_Service_registerWrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_registerWrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register a file descriptor for write monitoring. </p>
<p>For a file descriptor registered for write monitoring, a <a class="el" href="class_p_s_c___service.html#ac76d2ee8a24ef0c15f9555fd15b3fe53" title="A file descriptor is ready for writing.">PSC_Service_readyWrite()</a> event will be created when it's ready to write.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the file descriptor to monitor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4119741ca5b09aa0842e5185dc007107" name="a4119741ca5b09aa0842e5185dc007107"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4119741ca5b09aa0842e5185dc007107">&#9670;&#160;</a></span>PSC_Service_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PSC_Service_run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the service. </p>
<p>This automates everything needed for the service and runs the service loop. For configuration, see <a class="el" href="class_p_s_c___run_opts.html" title="Options for running a service.">PSC_RunOpts</a>. It will typically be called at the end of a main() function, after doing some configuration.</p>
<dl class="section return"><dt>Returns</dt><dd>an exit code </dd></dl>

</div>
</div>
<a id="ae7d1f83cfd355b5fa8cbcb27d8006024" name="ae7d1f83cfd355b5fa8cbcb27d8006024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d1f83cfd355b5fa8cbcb27d8006024">&#9670;&#160;</a></span>PSC_Service_setTickInterval()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PSC_Service_setTickInterval </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>msec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the timer tick interval. </p>
<p>This sets the interval at which <a class="el" href="class_p_s_c___service.html#adf392855cf95193b46a4da549d3fc2f3" title="The timer ticks.">PSC_Service_tick()</a> events are fired. The default is 1000ms (1 second).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msec</td><td>tick interval in milliseconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="acef87c33753313c9b1deb1c369647916" name="acef87c33753313c9b1deb1c369647916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acef87c33753313c9b1deb1c369647916">&#9670;&#160;</a></span>PSC_Service_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> * PSC_Service_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The service is shutting down. </p>
<p>This event fires when the service starts to shut down. Any cleanup should be done here.</p>
<p>Note you can delay the shutdown by calling <a class="el" href="class_p_s_c___service.html#a4fe59bacec328553a6e5a2f239fdd5fd" title="Delay shutdown of the service.">PSC_Service_shutdownLock()</a> if you need to do some asynchronous cleanup work. </p>

</div>
</div>
<a id="a4fe59bacec328553a6e5a2f239fdd5fd" name="a4fe59bacec328553a6e5a2f239fdd5fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fe59bacec328553a6e5a2f239fdd5fd">&#9670;&#160;</a></span>PSC_Service_shutdownLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_shutdownLock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delay shutdown of the service. </p>
<p>To be used from the <a class="el" href="class_p_s_c___service.html#acef87c33753313c9b1deb1c369647916" title="The service is shutting down.">PSC_Service_shutdown()</a> event, in case some asynchronous cleanup work has to be done that needs the service loop active.</p>
<p>Service shutdown will be delayed until <a class="el" href="class_p_s_c___service.html#a13c75bef0649759d6252806ab5f87aa7" title="Allow shutdown to continue.">PSC_Service_shutdownUnlock()</a> was called the same amount of times as <a class="el" href="class_p_s_c___service.html#a4fe59bacec328553a6e5a2f239fdd5fd" title="Delay shutdown of the service.">PSC_Service_shutdownLock()</a>. </p>

</div>
</div>
<a id="a13c75bef0649759d6252806ab5f87aa7" name="a13c75bef0649759d6252806ab5f87aa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c75bef0649759d6252806ab5f87aa7">&#9670;&#160;</a></span>PSC_Service_shutdownUnlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_shutdownUnlock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allow shutdown to continue. </p>
<p>See <a class="el" href="class_p_s_c___service.html#a4fe59bacec328553a6e5a2f239fdd5fd" title="Delay shutdown of the service.">PSC_Service_shutdownLock()</a> </p>

</div>
</div>
<a id="ac0beb89e8cc58a5e5c2546223e2aad11" name="ac0beb89e8cc58a5e5c2546223e2aad11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0beb89e8cc58a5e5c2546223e2aad11">&#9670;&#160;</a></span>PSC_Service_startup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> * PSC_Service_startup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The service started. </p>
<p>This event fires after all other startup completed successfully. It can be useful for any late initialization work. If you don't use <a class="el" href="class_p_s_c___service.html#a4119741ca5b09aa0842e5185dc007107" title="Run the service.">PSC_Service_run()</a>, you might want to reconfigure logging here and call Daemon_launched().</p>
<p>A <a class="el" href="class_p_s_c___e_a_startup.html" title="Event arguments for service (pre)startup events.">PSC_EAStartup</a> object is passed as the event args. Startup can be aborted by setting a non-0 return code on it. </p>

</div>
</div>
<a id="adf392855cf95193b46a4da549d3fc2f3" name="adf392855cf95193b46a4da549d3fc2f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf392855cf95193b46a4da549d3fc2f3">&#9670;&#160;</a></span>PSC_Service_tick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_p_s_c___event.html">PSC_Event</a> * PSC_Service_tick </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The timer ticks. </p>
<p>This event fires periodically, by default once per second. Call <a class="el" href="class_p_s_c___service.html#ae7d1f83cfd355b5fa8cbcb27d8006024" title="Set the timer tick interval.">PSC_Service_setTickInterval()</a> to change that. </p>

</div>
</div>
<a id="a17e2c881aa49769dc9e2bd40dd78bcad" name="a17e2c881aa49769dc9e2bd40dd78bcad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17e2c881aa49769dc9e2bd40dd78bcad">&#9670;&#160;</a></span>PSC_Service_unregisterPanic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_unregisterPanic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#a8c64699d484aba164fa0ae7baedeb360">PSC_PanicHandler</a>&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregister a panic handler. </p>
<p>The given handler is no longer called on a <a class="el" href="class_p_s_c___service.html#a2bea0a15772d5edc762d9b88143e1157" title="Trigger a service panic.">PSC_Service_panic()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>the panic handler </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a947f2fddef0d9e489adef6bbeb948ff1" name="a947f2fddef0d9e489adef6bbeb948ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a947f2fddef0d9e489adef6bbeb948ff1">&#9670;&#160;</a></span>PSC_Service_unregisterRead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_unregisterRead </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregister a file descriptor for read monitoring. </p>
<p><a class="el" href="class_p_s_c___service.html#ad465f718fbf675f4605660b8c29e8894" title="A file descriptor is ready for reading.">PSC_Service_readyRead()</a> events will no longer be created for the given file descriptor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the file descriptor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1c005146623534a921c7189b663669b1" name="a1c005146623534a921c7189b663669b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c005146623534a921c7189b663669b1">&#9670;&#160;</a></span>PSC_Service_unregisterWrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Service_unregisterWrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregister a file descriptor for write monitoring. </p>
<p><a class="el" href="class_p_s_c___service.html#ac76d2ee8a24ef0c15f9555fd15b3fe53" title="A file descriptor is ready for writing.">PSC_Service_readyWrite()</a> events will no longer be created for the given file descriptor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the file descriptor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>poser/core/<a class="el" href="service_8h_source.html">service.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_p_s_c___service.html">PSC_Service</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
