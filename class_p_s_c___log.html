<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>poser: PSC_Log Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">poser
   </div>
   <div id="projectbrief">A C framework for POsix SERvices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_p_s_c___log.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_p_s_c___log-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">PSC_Log Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A logging mechanism offering pluggable writers.  
 <a href="class_p_s_c___log.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="log_8h_source.html">poser/core/log.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a59899133691f7d9879017cec6b47b57f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___log.html#a59899133691f7d9879017cec6b47b57f">PSC_Log_setFileLogger</a> (FILE *file)</td></tr>
<tr class="memdesc:a59899133691f7d9879017cec6b47b57f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use a standard file logger.  <br /></td></tr>
<tr class="separator:a59899133691f7d9879017cec6b47b57f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c20f9b232d78826de04c017bc9c6fc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___log.html#a8c20f9b232d78826de04c017bc9c6fc6">PSC_Log_setSyslogLogger</a> (const char *ident, int facility, int withStderr)</td></tr>
<tr class="memdesc:a8c20f9b232d78826de04c017bc9c6fc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use a standard syslog loggeer.  <br /></td></tr>
<tr class="separator:a8c20f9b232d78826de04c017bc9c6fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee36480476509a47a158d9b6428a1a2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___log.html#aee36480476509a47a158d9b6428a1a2d">PSC_Log_setCustomLogger</a> (<a class="el" href="log_8h.html#a1f392463fbff859b3ef8ea3cb6f93fe4">PSC_LogWriter</a> writer, void *data)</td></tr>
<tr class="memdesc:aee36480476509a47a158d9b6428a1a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use a custom log writer.  <br /></td></tr>
<tr class="separator:aee36480476509a47a158d9b6428a1a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d429f86b2e953574324e68e3ff884c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___log.html#ad4d429f86b2e953574324e68e3ff884c">PSC_Log_setMaxLogLevel</a> (<a class="el" href="log_8h.html#ac88147d906da201e8b128683a5eec338">PSC_LogLevel</a> level)</td></tr>
<tr class="memdesc:ad4d429f86b2e953574324e68e3ff884c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set maximum log level.  <br /></td></tr>
<tr class="separator:ad4d429f86b2e953574324e68e3ff884c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ed1703300f37b7e360587ae4892e3de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___log.html#a3ed1703300f37b7e360587ae4892e3de">PSC_Log_setSilent</a> (int silent)</td></tr>
<tr class="memdesc:a3ed1703300f37b7e360587ae4892e3de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/disable silent mode.  <br /></td></tr>
<tr class="separator:a3ed1703300f37b7e360587ae4892e3de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47732aac0217a636f0e41937e1c8c21a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___log.html#a47732aac0217a636f0e41937e1c8c21a">PSC_Log_setAsync</a> (int async)</td></tr>
<tr class="memdesc:a47732aac0217a636f0e41937e1c8c21a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/disable asynchronous logging.  <br /></td></tr>
<tr class="separator:a47732aac0217a636f0e41937e1c8c21a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901d046f7a54e19ec30fd13e35f6c22b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___log.html#a901d046f7a54e19ec30fd13e35f6c22b">PSC_Log_msg</a> (<a class="el" href="log_8h.html#ac88147d906da201e8b128683a5eec338">PSC_LogLevel</a> level, const char *message)</td></tr>
<tr class="memdesc:a901d046f7a54e19ec30fd13e35f6c22b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a message.  <br /></td></tr>
<tr class="separator:a901d046f7a54e19ec30fd13e35f6c22b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fe82024e8cc76e424b6b6b125e97b69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_s_c___log.html#a7fe82024e8cc76e424b6b6b125e97b69">PSC_Log_fmt</a> (<a class="el" href="log_8h.html#ac88147d906da201e8b128683a5eec338">PSC_LogLevel</a> level, const char *format,...)</td></tr>
<tr class="memdesc:a7fe82024e8cc76e424b6b6b125e97b69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a message using a prinft-like format string.  <br /></td></tr>
<tr class="separator:a7fe82024e8cc76e424b6b6b125e97b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A logging mechanism offering pluggable writers. </p>
<p>This is a simple logging mechanism that can use any write function to implement different "log sinks". A function writing to an opened FILE and a function writing to syslog are included. It can optionally log asynchronously (making use of PSC_ThreadPool).</p>
<p>By default, no log writer is configured, so any log messages are just dropped. You have to set a log writer if you want to see log messages.</p>
<p>Note that PSC_Service_Run() automatically configures log writers if configured to do so via <a class="el" href="class_p_s_c___run_opts.html" title="Options for running a service.">PSC_RunOpts</a>. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a7fe82024e8cc76e424b6b6b125e97b69" name="a7fe82024e8cc76e424b6b6b125e97b69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fe82024e8cc76e424b6b6b125e97b69">&#9670;&#160;</a></span>PSC_Log_fmt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Log_fmt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="log_8h.html#ac88147d906da201e8b128683a5eec338">PSC_LogLevel</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Log a message using a prinft-like format string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>the log level </td></tr>
    <tr><td class="paramname">format</td><td>the printf-like format string </td></tr>
    <tr><td class="paramname">...</td><td>optional arguments for conversions in the format string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a901d046f7a54e19ec30fd13e35f6c22b" name="a901d046f7a54e19ec30fd13e35f6c22b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a901d046f7a54e19ec30fd13e35f6c22b">&#9670;&#160;</a></span>PSC_Log_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Log_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="log_8h.html#ac88147d906da201e8b128683a5eec338">PSC_LogLevel</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Log a message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>the log level </td></tr>
    <tr><td class="paramname">message</td><td>the message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a47732aac0217a636f0e41937e1c8c21a" name="a47732aac0217a636f0e41937e1c8c21a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47732aac0217a636f0e41937e1c8c21a">&#9670;&#160;</a></span>PSC_Log_setAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Log_setAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>async</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable/disable asynchronous logging. </p>
<p>In asynchronous mode, calling the actual log writer is done on a worker thread, to avoid having to wait for I/O caused by it on the main thread.</p>
<p>Asynchronous mode is disabled by default, but it is recommended to enable it once your service is up and running, as long as you can't guarantee your log writer will never block. Note that both writing to a file (on disk) and writing to syslog <em>can</em> block.</p>
<p>Also note PSC_Service_run() automatically enables asynchronous logging when configured to handle logging via <a class="el" href="class_p_s_c___run_opts.html" title="Options for running a service.">PSC_RunOpts</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">async</td><td>1: enable asynchronous mode, 0: disable asynchronous mode </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aee36480476509a47a158d9b6428a1a2d" name="aee36480476509a47a158d9b6428a1a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee36480476509a47a158d9b6428a1a2d">&#9670;&#160;</a></span>PSC_Log_setCustomLogger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Log_setCustomLogger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="log_8h.html#a1f392463fbff859b3ef8ea3cb6f93fe4">PSC_LogWriter</a>&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use a custom log writer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>the log writer </td></tr>
    <tr><td class="paramname">data</td><td>optional context data for the writer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a59899133691f7d9879017cec6b47b57f" name="a59899133691f7d9879017cec6b47b57f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59899133691f7d9879017cec6b47b57f">&#9670;&#160;</a></span>PSC_Log_setFileLogger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Log_setFileLogger </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use a standard file logger. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>the opened file to write log messages to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad4d429f86b2e953574324e68e3ff884c" name="ad4d429f86b2e953574324e68e3ff884c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d429f86b2e953574324e68e3ff884c">&#9670;&#160;</a></span>PSC_Log_setMaxLogLevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Log_setMaxLogLevel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="log_8h.html#ac88147d906da201e8b128683a5eec338">PSC_LogLevel</a>&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set maximum log level. </p>
<p>Only log messages up to this level. Highest: PSC_L_DEBUG, lowest: PSC_L_FATAL. Default is PSC_L_INFO.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>the new maximum log level </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3ed1703300f37b7e360587ae4892e3de" name="a3ed1703300f37b7e360587ae4892e3de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ed1703300f37b7e360587ae4892e3de">&#9670;&#160;</a></span>PSC_Log_setSilent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Log_setSilent </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>silent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable/disable silent mode. </p>
<p>This can be used to temporarily suppress all messages except PSC_L_FATAL and PSC_L_ERROR, regardless of the maximum log level.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">silent</td><td>1: enable silent mode, 0: disable silent mode </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8c20f9b232d78826de04c017bc9c6fc6" name="a8c20f9b232d78826de04c017bc9c6fc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c20f9b232d78826de04c017bc9c6fc6">&#9670;&#160;</a></span>PSC_Log_setSyslogLogger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PSC_Log_setSyslogLogger </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ident</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>facility</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>withStderr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use a standard syslog loggeer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ident</td><td>the name to use for syslog (name of your service) </td></tr>
    <tr><td class="paramname">facility</td><td>the syslog facility (e.g. LOG_DAEMON) </td></tr>
    <tr><td class="paramname">withStderr</td><td>(0) or (1): also write to stderr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>poser/core/<a class="el" href="log_8h_source.html">log.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_p_s_c___log.html">PSC_Log</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
